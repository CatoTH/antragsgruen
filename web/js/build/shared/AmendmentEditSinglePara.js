define(["require","exports","./AntragsgruenEditor"],function(t,a,n){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function t(){var e=this;this.$paragraphs=$(".wysiwyg-textarea.single-paragraph"),this.$paragraphs.click(function(t){e.startEditing(t.delegateTarget)}),this.$paragraphs.find(".modifiedActions .revert").click(function(t){t.preventDefault(),t.stopPropagation(),e.revertChanges(t.delegateTarget)}),this.setModifyable(),$(".wysiwyg-textarea").filter(":not(.single-paragraph)").each(function(t,a){e.handleRegularTextField(a)}),$(".texteditorBox").each(function(t,a){var e=$(a),i=e.data("section-id"),r=e.data("changed-para-no");-1<r&&$("#section_holder_"+i+"_"+r).click()})}return t.prototype.handleRegularTextField=function(t){var a=$(t),e=a.find(".texteditor");if(!a.hasClass("hidden")){var i=new n.AntragsgruenEditor(e.attr("id")).getEditor();e.parents("form").submit(function(){e.parent().find("textarea.raw").val(i.getData()),void 0!==i.plugins.lite&&(i.plugins.lite.findPlugin(i).acceptAll(),e.parent().find("textarea.consolidated").val(i.getData()))})}},t.prototype.revertChanges=function(t){var a=$(t).parents(".wysiwyg-textarea"),e=a.find(".texteditor"),i=e.attr("id");$("#"+i).attr("contenteditable","false"),e.html(a.data("original")),a.removeClass("modified"),this.setModifyable()},t.prototype.startEditing=function(t){var a=$(t);if(a.hasClass("modifyable")){a.addClass("modified"),this.setModifyable();var e,i=a.find(".texteditor");if(void 0!==CKEDITOR.instances[i.attr("id")])e=CKEDITOR.instances[i.attr("id")];else{var r=new n.AntragsgruenEditor(i.attr("id"));e=r.getEditor()}i.attr("contenteditable","true"),i.parents("form").submit(function(){i.parent().find("textarea.raw").val(e.getData()),void 0!==e.plugins.lite&&(e.plugins.lite.findPlugin(e).acceptAll(),i.parent().find("textarea.consolidated").val(e.getData()))}),i.focus()}},t.prototype.setModifyable=function(){var t=this.$paragraphs.filter(".modified");0==t.length?this.$paragraphs.addClass("modifyable"):(this.$paragraphs.removeClass("modifyable"),$("input[name=modifiedParagraphNo]").val(t.data("paragraph-no")),$("input[name=modifiedSectionId]").val(t.parents(".texteditorBox").data("section-id")))},t}();a.AmendmentEditSinglePara=e});
//# sourceMappingURL=AmendmentEditSinglePara.js.map
