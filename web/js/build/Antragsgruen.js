!function(e){const t=e("#antragsgruenScript");let n=requirejs.config({baseUrl:t.data("resource-base")+"js/build/"});e("[data-antragsgruen-load-class]").each((function(){let t=e(this).data("antragsgruen-load-class");n([t])})),e("[data-antragsgruen-widget]").each((function(){let t=e(this),o=t.data("antragsgruen-widget");n([o],(function(e){let n=o.split("/");new e[n[n.length-1]](t)}))})),e(".jsProtectionHint").each((function(){let t=e(this);e('<input type="hidden" name="jsprotection">').attr("value",t.data("value")).appendTo(t.parent()),t.remove()})),bootbox.setLocale(e("html").attr("lang").split("_")[0]),e(document).on("click",".amendmentAjaxTooltip",(function(t){let n=e(t.currentTarget);if("0"==n.data("initialized")){n.data("initialized","1");let t="popover popover-amendment-ajax "+n.data("tooltip-extra-class"),o="right";n.data("placement")&&(o=n.data("placement")),n.popover({html:!0,trigger:"manual",container:"body",template:'<div class="'+t+'" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',placement:o,content:function(){let t="pop_"+(new Date).getTime(),o='<div id="'+t+'">Loading...</div>',a=n.data("url");return e.get(a,(function(n){e("#"+t).html(n)})),o}})}e(".amendmentAjaxTooltip").not(n).popover("hide"),e(".ajaxAmendment").parents(".popover").remove(),n.popover("toggle")})),e(document).on("click",(function(t){let n=e(t.target);n.hasClass("amendmentAjaxTooltip")||n.hasClass("popover")||0!=n.parents(".amendmentAjaxTooltip").length||0!=n.parents(".popover").length||(e(".amendmentAjaxTooltip").popover("hide"),e(".ajaxAmendment").parents(".popover").remove())})),e(document).on("click",".pseudoLink",(t=>{window.location.href=e(t.currentTarget).data("href")})),document.body.addEventListener("mousedown",(()=>{document.body.classList.add("usingMouse")})),document.body.addEventListener("keydown",(()=>{document.body.classList.remove("usingMouse")}));const o=(t,n)=>{const a=".",i=""===n||n[n.length-1]===a?n:n+a;let r="0.";t.find("> li.agendaItem").each((function(){let t,c=e(this),s=c.find("> ol");if(c.hasClass("agendaItemDate"))t=n;else{const e=c.data("code");if("#"==e){let e=r.split(a);if(e[0].match(/^[a-y]$/i))e[0]=String.fromCharCode(e[0].charCodeAt(0)+1);else{let t=e[0].match(/^(.*[^0-9])?([0-9]*)$/),n=void 0===t[1]?"":t[1],o=parseInt(""==t[2]?"1":t[2]);e[0]=n+ ++o}r=t=e.join(a)}else t=r=(e+"").trim();""!==t&&(t=i+t),c.find("> div > h3 .code").text(t)}s.length>0&&o(s,t)}))};if(e("ol.motionListWithinAgenda").on("antragsgruen:agenda-change",(function(){o(e(this),"")})).trigger("antragsgruen:agenda-change"),e(".motionList .amendmentsToggler").each(((t,n)=>{const o=e(n);o.find("button").on("click",(()=>{o.toggleClass("closed"),o.toggleClass("opened"),o.next("ul.amendments").toggleClass("closed")}))})),window.__t=function(e,t){return"undefined"==typeof ANTRAGSGRUEN_STRINGS?"@TRANSLATION STRINGS NOT LOADED":void 0===ANTRAGSGRUEN_STRINGS[e]?"@UNKNOWN CATEGORY: "+e:void 0===ANTRAGSGRUEN_STRINGS[e][t]?"@UNKNOWN STRING: "+e+" / "+t:ANTRAGSGRUEN_STRINGS[e][t]},e("meta[name=live-jwt]").length>0){const t=e("meta[name=live-userid]").attr("content"),n=e("meta[name=live-sitecon]").attr("content"),o=new StompJs.Client({brokerURL:e("meta[name=live-uri]").attr("content"),debug:function(e){console.log(e)},reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3,connectHeaders:{jwt:e("meta[name=live-jwt]").attr("content")}});o.onConnect=e=>{console.log("Connected"),o.subscribe("/topic/"+n+"/greetings",(e=>{console.log("GLOBAL: "+JSON.parse(e.body).content)})),o.subscribe("/user/"+n+"/"+encodeURIComponent(t)+"/update",(e=>{console.log("USER 1: "+JSON.parse(e.body).content)}))},o.onWebSocketError=e=>{console.error("Error with websocket",e)},o.onStompError=e=>{console.error("Broker reported error: "+e.headers.message),console.error("Additional details: "+e.body)},o.activate()}}(jQuery);const VUE_TO_REGISTER_COMPONENTS={fullscreen:[],merging:[],speech:[],users:[],voting:[]};window.__setVueComponent=function(e,t,n,o){VUE_TO_REGISTER_COMPONENTS[e].push({componentType:t,componentName:n,componentData:o})},window.__initVueComponents=function(e,t){VUE_TO_REGISTER_COMPONENTS[t].forEach((t=>{"component"===t.componentType?e.component(t.componentName,t.componentData):"directive"===t.componentType?e.directive(t.componentName,t.componentData):console.warn("Unknown component Type: "+t.componentType)}))};
//# sourceMappingURL=Antragsgruen.js.map
