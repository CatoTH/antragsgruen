var SiteAccess=function(){function e(){this.initSite(),this.initUserList(),this.initAddUsers(),this.initAdmins()}return e.prototype.initSite=function(){$(".managedUserAccounts input").change(function(){$(this).prop("checked")?$(".showManagedUsers").removeClass("hidden"):$(".showManagedUsers").addClass("hidden")}).trigger("change")},e.prototype.initAddUsers=function(){$(".addUsersOpener").click(function(e){var t=$(e.currentTarget).data("type");$(".addUsersByLogin").addClass("hidden"),$(".addUsersByLogin."+t).removeClass("hidden")}),$("#accountsCreateForm").submit(function(e){if(!$(".addUsersByLogin.email").hasClass("hidden")){var t=$("#emailText").val();-1==t.indexOf("%ACCOUNT%")&&(bootbox.alert(__t("admin","emailMissingCode")),e.preventDefault()),-1==t.indexOf("%LINK%")&&(bootbox.alert(__t("admin","emailMissingLink")),e.preventDefault());var i=$("#emailAddresses").val().split("\n"),n=$("#names").val().split("\n");1==i.length&&""==i[0]&&(e.preventDefault(),bootbox.alert(__t("admin","emailMissingTo"))),i.length!=n.length&&(bootbox.alert(__t("admin","emailNumberMismatch")),e.preventDefault())}$(".addUsersByLogin.samlWW").hasClass("hidden")||""===$("#samlWW").val()&&(e.preventDefault(),bootbox.alert(__t("admin","emailMissingUsername")))})},e.prototype.initUserList=function(){$(".accountListTable .accessViewCol input[type=checkbox]").change(function(){$(this).prop("checked")||$(this).parents("tr").first().find(".accessCreateCol input[type=checkbox]").prop("checked",!1)}),$(".accountListTable .accessCreateCol input[type=checkbox]").change(function(){$(this).prop("checked")&&$(this).parents("tr").first().find(".accessViewCol input[type=checkbox]").prop("checked",!0)})},e.prototype.initAdmins=function(){this.$adminForm=$("#adminForm"),this.$adminForm.on("click",".removeAdmin",function(e){var i=$(e.currentTarget),n=$(e.currentTarget).parents("form").first();bootbox.confirm(__t("admin","removeAdminConfirm"),function(e){if(e){var t=i.data("id");n.append('<input type="hidden" name="removeAdmin" value="'+t+'">'),n.submit()}})}),this.$adminForm.on("change",".adminCard .typeSite input",function(e){var t=$(e.currentTarget).parents(".adminCard").first();$(e.currentTarget).prop("checked")?t.find(".typeCon, .typeProposal").addClass("hidden"):t.find(".typeCon, .typeProposal").removeClass("hidden")}),this.$adminForm.find(".adminCard .typeSite input").trigger("change")},e}();new SiteAccess;
//# sourceMappingURL=SiteAccess.js.map
