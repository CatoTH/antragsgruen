class SiteAccess{constructor(){this.initSite(),this.initUserList(),this.initDelUser(),this.initAdmins(),this.initConPwd()}initSite(){$(".managedUserAccounts input").on("change",(function(){$(this).prop("checked")?$(".showManagedUsers").removeClass("hidden"):$(".showManagedUsers").addClass("hidden")})).trigger("change")}initDelUser(){$(".accountListTable .deleteUser").on("click",(e=>{e.preventDefault();const t=$(e.currentTarget),i=$(e.currentTarget).parents("form").first(),n=__t("admin","removeUserConfirm").replace(/%NAME%/,t.data("name"));bootbox.confirm(n,(e=>{if(e){let e=t.data("id");i.append('<input type="hidden" name="deleteUser" value="'+e+'">'),i.trigger("submit")}}))}))}initUserList(){$(".accountListTable .accessViewCol input[type=checkbox]").on("change",(function(){$(this).prop("checked")||$(this).parents("tr").first().find(".accessCreateCol input[type=checkbox]").prop("checked",!1)})),$(".accountListTable .accessCreateCol input[type=checkbox]").on("change",(function(){$(this).prop("checked")&&$(this).parents("tr").first().find(".accessViewCol input[type=checkbox]").prop("checked",!0)}))}initAdmins(){this.$adminForm=$("#adminForm"),this.$adminForm.on("click",".removeAdmin",(e=>{let t=$(e.currentTarget),i=$(e.currentTarget).parents("form").first();bootbox.confirm(__t("admin","removeAdminConfirm"),(e=>{if(e){let e=t.data("id");i.append('<input type="hidden" name="removeAdmin" value="'+e+'">'),i.trigger("submit")}}))})),this.$adminForm.on("change",".adminCard .typeSite input",(e=>{let t=$(e.currentTarget).parents(".adminCard").first();$(e.currentTarget).prop("checked")?t.find(".typeCon, .typeProposal").addClass("hidden"):t.find(".typeCon, .typeProposal").removeClass("hidden")})),this.$adminForm.find(".adminCard .typeSite input").trigger("change"),this.$adminForm.find(".ppReplyToOpener").on("click",(e=>{$(e.currentTarget).parents(".adminCard").find(".ppReplyTo").removeClass("hidden").find("input").trigger("focus"),$(e.currentTarget).addClass("hidden")}))}initConPwd(){const e=$(".conpw"),t=e.find(".setter input[type=checkbox]");t.on("change",(()=>{t.prop("checked")?e.addClass("checked"):e.removeClass("checked")})).trigger("change"),e.find(".setNewPassword").on("click",(t=>{t.preventDefault(),t.stopPropagation(),e.addClass("changePwd")}))}}new SiteAccess;
//# sourceMappingURL=SiteAccess.js.map
