{"version":3,"sources":["backend/AgendaEditVue.js","backend/AgendaEditVue.ts"],"names":["define","require","exports","Object","defineProperty","value","AgendaEditVue","constructor","$element","this","element","createVueWidget","vueEl","querySelector","agendaWidgetComponent","agenda","JSON","parse","getAttribute","saveAgendaUrl","csrf","document","widget","Vue","createApp","template","data","methods","onSaveAgenda","console","log","stringify","$","ajax","url","type","processData","contentType","dataType","headers","success","msg_error","bootbox","alert","catch","err","responseText","config","compilerOptions","whitespace","window","mount"],"mappings":"AAAAA,OAAO,CAAC,UAAW,YAAY,SAAUC,EAASC,GAC9C,aACAC,OAAOC,eAAeF,EAAS,aAAc,CAAEG,OAAO,IACtDH,EAAQI,mBAAgB,ECD5BJ,EAAAI,cAAA,MAII,WAAAC,CAAYC,GACRC,KAAKC,QAAUF,EAAS,GACxBC,KAAKE,iBACT,CAEQ,eAAAA,GACJ,MAAMC,EAAQH,KAAKC,QAAQG,cAAc,eACzC,IAAIC,EAEJ,MAAMC,EAASC,KAAKC,MAAMR,KAAKC,QAAQQ,aAAa,gBAC9CC,EAAgBV,KAAKC,QAAQQ,aAAa,wBAC1CE,EAAOC,SAASR,cAAc,8BAA8BK,aAAa,WAE/ET,KAAKa,OAASC,IAAIC,UAAU,CACxBC,SAAU,wQAOVC,KAAI,KACO,CACHX,WAGRY,QAAS,CACL,YAAAC,GACIC,QAAQC,IAAId,KAAKe,UAAUtB,KAAKM,SAChC,MAAMO,EAASb,KAEfuB,EAAEC,KAAK,CACHC,IAAKf,EACLgB,KAAM,OACNT,KAAMV,KAAKe,UAAUtB,KAAKM,QAC1BqB,aAAa,EACbC,YAAa,kCACbC,SAAU,OACVC,QAAS,CAAC,eAAgBnB,GAC1BoB,QAASd,IACDA,EAAKe,UACLC,QAAQC,MAAMjB,EAAKe,WAEnBnB,EAAOP,OAASW,CACpB,IAELkB,OAAM,SAAUC,GACfF,MAAME,EAAIC,aACd,GACJ,KAIRrC,KAAKa,OAAOyB,OAAOC,gBAAgBC,WAAa,WAChDC,OAA4B,oBAAEzC,KAAKa,OAAQ,UAE3CR,EAAwBL,KAAKa,OAAO6B,MAAMvC,GAG1CsC,OAAqB,aAAIpC,CAC7B,EDJJ","file":"AgendaEditVue.js","sourcesContent":[null,"declare let Vue: any;\n\nexport class AgendaEditVue {\n    private widget;\n    private element: HTMLElement;\n\n    constructor($element: JQuery) {\n        this.element = $element[0];\n        this.createVueWidget();\n    }\n\n    private createVueWidget() {\n        const vueEl = this.element.querySelector(\".agendaEdit\");\n        let agendaWidgetComponent;\n\n        const agenda = JSON.parse(this.element.getAttribute('data-agenda'));\n        const saveAgendaUrl = this.element.getAttribute('data-save-agenda-url');\n        const csrf = document.querySelector('head meta[name=csrf-token]').getAttribute('content') as string;\n\n        this.widget = Vue.createApp({\n            template: `<div class=\"agendaEditHolder\">\n                <agenda-edit-widget\n                    v-model=\"agenda\"\n                    ref=\"agenda-edit-widget\"\n                    @saveAgenda=\"onSaveAgenda()\"\n                ></agenda-edit-widget>\n            </div>`,\n            data() {\n                return {\n                    agenda\n                }\n            },\n            methods: {\n                onSaveAgenda() {\n                    console.log(JSON.stringify(this.agenda));\n                    const widget = this;\n\n                    $.ajax({\n                        url: saveAgendaUrl,\n                        type: \"POST\",\n                        data: JSON.stringify(this.agenda),\n                        processData: false,\n                        contentType: \"application/json; charset=utf-8\",\n                        dataType: \"json\",\n                        headers: {\"X-CSRF-Token\": csrf},\n                        success: data => {\n                            if (data.msg_error) {\n                                bootbox.alert(data.msg_error);\n                            } else {\n                                widget.agenda = data;\n                            }\n                        }\n                    }).catch(function (err) {\n                        alert(err.responseText);\n                    })\n                }\n            }\n        });\n\n        this.widget.config.compilerOptions.whitespace = 'condense';\n        window['__initVueComponents'](this.widget, 'agenda');\n\n        agendaWidgetComponent = this.widget.mount(vueEl);\n\n        // Used by tests to control vue-select\n        window['agendaWidget'] = agendaWidgetComponent;\n    }\n}\n"]}