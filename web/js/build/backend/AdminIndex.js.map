{"version":3,"sources":["backend/AdminIndex.ts"],"names":["AdminIndex","this","initDelSite","initUpdates","prototype","$delForm","$","find","click","ev","preventDefault","$button","bootbox","confirm","__t","result","$input","attr","append","submit","onSubmitGotoUpdateForm","data","confirmed","message","callback","trigger","$updateWidget","get","html","on","currentTarget","parents","first","toggleClass"],"mappings":"AAEA,IAAAA,WAAA,WACI,SAAAA,IACIC,KAAKC,cACLD,KAAKE,cA2Cb,OAxCYH,EAAAI,UAAAF,YAAR,WACI,IAAIG,EAAWC,EAAE,kBACjBD,EAASE,KAAK,UAAUC,MAAM,SAAUC,GACpCA,EAAGC,iBACH,IAAIC,EAAUL,EAAEL,MAChBW,QAAQC,QAAQC,IAAI,QAAS,qBAAsB,SAAUC,GACzD,GAAIA,EAAQ,CACR,IAAIC,EAASV,EAAE,yBAAyBW,KAAK,OAAQN,EAAQM,KAAK,SAASA,KAAK,QAASN,EAAQM,KAAK,UACtGZ,EAASa,OAAOF,GAChBX,EAASc,eAMjBnB,EAAAI,UAAAgB,uBAAR,SAA+BX,EAAIY,GAC3BA,IAAeA,EAAc,UAArB,KAA6C,IAAnBA,EAAKC,YAG3Cb,EAAGC,iBACHE,QAAQC,QAAQ,CACZU,QAAST,IAAI,QAAS,yBACtBU,SAAU,SAACT,GACHA,GACAT,EAAE,iCAAiCmB,QAAQ,SAAU,CAACH,WAAa,SAM3EtB,EAAAI,UAAAD,YAAR,WACI,IAAIuB,EAAgBpB,EAAE,0BACtBA,EAAEqB,IAAID,EAAcL,KAAK,OAAQ,SAASA,GACtCK,EAAcE,KAAKP,KAEvBK,EAAcG,GAAG,QAAS,eAAgB,SAACpB,GACvCH,EAAEG,EAAGqB,eAAeC,QAAQ,MAAMC,QAAQzB,KAAK,YAAY0B,YAAY,YAE3EP,EAAcG,GAAG,SAAU,cAAe5B,KAAKmB,yBAEvDpB,EA9CA,GAgDA,IAAIA","file":"AdminIndex.js","sourcesContent":["declare let __t: any;\n\nclass AdminIndex {\n    constructor() {\n        this.initDelSite();\n        this.initUpdates();\n    }\n\n    private initDelSite() {\n        let $delForm = $(\".delSiteCaller\");\n        $delForm.find(\"button\").click(function (ev) {\n            ev.preventDefault();\n            let $button = $(this);\n            bootbox.confirm(__t('admin', 'consDeleteConfirm'), function (result) {\n                if (result) {\n                    let $input = $('<input type=\"hidden\">').attr(\"name\", $button.attr(\"name\")).attr(\"value\", $button.attr(\"value\"));\n                    $delForm.append($input);\n                    $delForm.submit();\n                }\n            });\n        });\n    }\n\n    private onSubmitGotoUpdateForm(ev, data) {\n        if (data && typeof(data.confirmed) && data.confirmed === true) {\n            return;\n        }\n        ev.preventDefault();\n        bootbox.confirm({\n            message: __t('admin', 'gotoUpdateModeConfirm'),\n            callback: (result) => {\n                if (result) {\n                    $('.adminCardUpdates .updateForm').trigger('submit', {'confirmed': true});\n                }\n            }\n        });\n    }\n\n    private initUpdates() {\n        let $updateWidget = $('.adminCardUpdates main');\n        $.get($updateWidget.data('src'), function(data) {\n            $updateWidget.html(data);\n        });\n        $updateWidget.on('click', '.showChanges', (ev) => {\n            $(ev.currentTarget).parents('li').first().find('.changes').toggleClass('hidden');\n        });\n        $updateWidget.on('submit', '.updateForm', this.onSubmitGotoUpdateForm);\n    }\n}\n\nnew AdminIndex();\n"]}