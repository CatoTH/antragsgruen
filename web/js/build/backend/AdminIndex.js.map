{"version":3,"sources":["backend/AdminIndex.ts"],"names":["AdminIndex","constructor","this","initDelSite","initUpdates","$delForm","$","find","click","ev","preventDefault","$button","bootbox","confirm","__t","result","$input","attr","append","submit","onSubmitGotoUpdateForm","data","confirmed","message","callback","trigger","$updateWidget","get","html","on","currentTarget","parents","first","toggleClass"],"mappings":"AAEA,MAAMA,WACF,WAAAC,GACIC,KAAKC,cACLD,KAAKE,aACT,CAEQ,WAAAD,GACJ,IAAIE,EAAWC,EAAE,kBACjBD,EAASE,KAAK,UAAUC,OAAM,SAAUC,GACpCA,EAAGC,iBACH,IAAIC,EAAUL,EAAEJ,MAChBU,QAAQC,QAAQC,IAAI,QAAS,sBAAsB,SAAUC,GACzD,GAAIA,EAAQ,CACR,IAAIC,EAASV,EAAE,yBAAyBW,KAAK,OAAQN,EAAQM,KAAK,SAASA,KAAK,QAASN,EAAQM,KAAK,UACtGZ,EAASa,OAAOF,GAChBX,EAASc,QACb,CACJ,GACJ,GACJ,CAEQ,sBAAAC,CAAuBX,EAAIY,GAC3BA,IAAeA,EAAc,UAArB,KAA6C,IAAnBA,EAAKC,YAG3Cb,EAAGC,iBACHE,QAAQC,QAAQ,CACZU,QAAST,IAAI,QAAS,yBACtBU,SAAWT,IACHA,GACAT,EAAE,iCAAiCmB,QAAQ,SAAU,CAACH,WAAa,GACvE,IAGZ,CAEQ,WAAAlB,GACJ,IAAIsB,EAAgBpB,EAAE,0BACtBA,EAAEqB,IAAID,EAAcL,KAAK,QAAQ,SAASA,GACtCK,EAAcE,KAAKP,EACvB,IACAK,EAAcG,GAAG,QAAS,gBAAiBpB,IACvCH,EAAEG,EAAGqB,eAAeC,QAAQ,MAAMC,QAAQzB,KAAK,YAAY0B,YAAY,SAAS,IAEpFP,EAAcG,GAAG,SAAU,cAAe3B,KAAKkB,uBACnD,EAGJ,IAAIpB","file":"AdminIndex.js","sourcesContent":["declare let __t: any;\n\nclass AdminIndex {\n    constructor() {\n        this.initDelSite();\n        this.initUpdates();\n    }\n\n    private initDelSite() {\n        let $delForm = $(\".delSiteCaller\");\n        $delForm.find(\"button\").click(function (ev) {\n            ev.preventDefault();\n            let $button = $(this);\n            bootbox.confirm(__t('admin', 'consDeleteConfirm'), function (result) {\n                if (result) {\n                    let $input = $('<input type=\"hidden\">').attr(\"name\", $button.attr(\"name\")).attr(\"value\", $button.attr(\"value\"));\n                    $delForm.append($input);\n                    $delForm.submit();\n                }\n            });\n        });\n    }\n\n    private onSubmitGotoUpdateForm(ev, data) {\n        if (data && typeof(data.confirmed) && data.confirmed === true) {\n            return;\n        }\n        ev.preventDefault();\n        bootbox.confirm({\n            message: __t('admin', 'gotoUpdateModeConfirm'),\n            callback: (result) => {\n                if (result) {\n                    $('.adminCardUpdates .updateForm').trigger('submit', {'confirmed': true});\n                }\n            }\n        });\n    }\n\n    private initUpdates() {\n        let $updateWidget = $('.adminCardUpdates main');\n        $.get($updateWidget.data('src'), function(data) {\n            $updateWidget.html(data);\n        });\n        $updateWidget.on('click', '.showChanges', (ev) => {\n            $(ev.currentTarget).parents('li').first().find('.changes').toggleClass('hidden');\n        });\n        $updateWidget.on('submit', '.updateForm', this.onSubmitGotoUpdateForm);\n    }\n}\n\nnew AdminIndex();\n"]}