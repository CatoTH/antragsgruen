define(["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResponsibilitySetter=void 0;t.ResponsibilitySetter=class{constructor(e){this.$list=e,e.on("click",".respHolder .respUser",this.userSelected.bind(this)),e.on("click",".respHolder .respCommentRow button",this.onCommentSaveBtn.bind(this)),e.on("keypress",".respHolder .respCommentRow input[type=text]",this.onKeyPressed.bind(this))}userSelected(e){e.preventDefault();const t=$(e.currentTarget),s=t.parents(".respHolder").first(),r=t.data("user-id"),n=t.find(".name").text(),o=s.data("save-url");$.post(o,{_csrf:$("input[name=_csrf]").val(),user:r},(e=>{e.success?(s.find(".respUser").removeClass("selected"),t.addClass("selected"),s.find(".responsibilityUser").text(n).data("user-id",r)):alert("An error occurred while saving")}))}onCommentSaveBtn(e){e.preventDefault();const t=$(e.currentTarget).parents(".respHolder").first();this.saveComment(t)}onKeyPressed(e){if("Enter"===e.key){e.preventDefault(),e.stopPropagation();const t=$(e.currentTarget).parents(".respHolder").first();this.saveComment(t)}}saveComment(e){const t=e.find(".respCommentRow input[type=text]").val(),s=e.data("save-url");$.post(s,{_csrf:$("input[name=_csrf]").val(),comment:t},(s=>{s.success?(e.find(".responsibilityComment").text(t),e.hasClass("open")&&e.find(".dropdown-toggle").dropdown("toggle")):alert("An error occurred while saving")}))}}}));
//# sourceMappingURL=ResponsibilitySetter.js.map
