{"version":3,"sources":["backend/Theming.js","backend/Theming.ts"],"names":["define","require","exports","Object","defineProperty","value","Theming","ImageChooser","constructor","$row","this","$uploadLabel","find","on","ev","preventDefault","src","$","currentTarget","attr","val","length","prepend","removeClass","text","data","path","split","filename","addClass","$form","each","i","el","options","title","message","inputType","inputOptions","callback","result","$defaults","append","trigger","bootbox","prompt"],"mappings":"AAAAA,OAAO,CAAC,UAAW,YAAY,SAAUC,EAASC,GAC9C,aACAC,OAAOC,eAAeF,EAAS,aAAc,CAAEG,OAAO,IACtDH,EAAQI,aAAU,ECHtB,MAAMC,EACF,WAAAC,CAAoBC,GAAAC,KAAAD,KAAAA,EAChB,MAAME,EAAeF,EAAKG,KAAK,0BAC/BH,EAAKI,GAAG,QAAS,wBAAwBC,IACrCA,EAAGC,iBACH,MAAMC,EAAMC,EAAEH,EAAGI,eAAeN,KAAK,OAAOO,KAAK,OACjDV,EAAKG,KAAK,sBAAsBQ,IAAIJ,GACS,IAAzCP,EAAKG,KAAK,oBAAoBS,QAC9BZ,EAAKG,KAAK,gBAAgBU,QAAQ,uBAEtCb,EAAKG,KAAK,oBAAoBO,KAAK,MAAOH,GAAKO,YAAY,UAC3DZ,EAAaa,KAAKb,EAAac,KAAK,UACpChB,EAAKG,KAAK,oBAAoBQ,IAAI,GAAG,IAEzCX,EAAKG,KAAK,oBAAoBC,GAAG,UAAU,KACvC,MAAMa,EAAOjB,EAAKG,KAAK,oBAAoBQ,MAAMO,MAAM,MACjDC,EAAWF,EAAKA,EAAKL,OAAS,GACpCZ,EAAKG,KAAK,sBAAsBQ,IAAI,IACpCX,EAAKG,KAAK,oBAAoBiB,SAAS,UACvClB,EAAaa,KAAKI,EAAS,GAEnC,EAGJ1B,EAAAI,QAAA,MACI,WAAAE,CAAoBsB,GAAApB,KAAAoB,MAAAA,EAChBpB,KAAKoB,MAAMlB,KAAK,cAAcmB,MAAK,CAACC,EAAGC,KACnC,IAAI1B,EAAaU,EAAEgB,GAAI,IAG3BvB,KAAKoB,MAAMjB,GAAG,QAAS,kBAAmBC,IACtCA,EAAGC,iBAEH,MAAMmB,EAAU,CACZC,MAAOlB,EAAEH,EAAGI,eAAeO,KAAK,iBAChCW,QAASnB,EAAEH,EAAGI,eAAeO,KAAK,mBAClCY,UAAW,QACXC,aAAc,CACV,CACId,KAAMP,EAAEH,EAAGI,eAAeO,KAAK,gBAC/BpB,MAAO,kBAEX,CACImB,KAAMP,EAAEH,EAAGI,eAAeO,KAAK,aAC/BpB,MAAO,gBAGfkC,SAAWC,IACP,GAAIA,EAAQ,CACR,MAAMC,EAAYxB,EAAE,mDAAmDE,KAAK,QAASqB,GACrF9B,KAAKoB,MAAMY,OAAO,qDAClBhC,KAAKoB,MAAMY,OAAOD,GAClB/B,KAAKoB,MAAMa,QAAQ,SDInB,ICAZC,QAAQC,OAAOX,EAAQ,GAE/B,EDMJ","file":"Theming.js","sourcesContent":[null,"class ImageChooser {\n    constructor(private $row) {\n        const $uploadLabel = $row.find('.uploadCol label .text');\n        $row.on('click', '.imageChooserDd ul a', ev => {\n            ev.preventDefault();\n            const src = $(ev.currentTarget).find(\"img\").attr(\"src\");\n            $row.find('input[type=hidden]').val(src);\n            if ($row.find('.logoPreview img').length === 0) {\n                $row.find('.logoPreview').prepend('<img src=\"\" alt=\"\">');\n            }\n            $row.find('.logoPreview img').attr('src', src).removeClass('hidden');\n            $uploadLabel.text($uploadLabel.data('title'));\n            $row.find(\"input[type=file]\").val('');\n        });\n        $row.find(\"input[type=file]\").on(\"change\", () => {\n            const path = $row.find(\"input[type=file]\").val().split('\\\\');\n            const filename = path[path.length - 1];\n            $row.find('input[type=hidden]').val('');\n            $row.find(\".logoPreview img\").addClass('hidden');\n            $uploadLabel.text(filename);\n        });\n    }\n}\n\nexport class Theming {\n    constructor(private $form: JQuery) {\n        this.$form.find('.row_image').each((i, el) => {\n            new ImageChooser($(el));\n        });\n\n        this.$form.on('click', '.btnResetTheme', (ev) => {\n            ev.preventDefault();\n\n            const options = {\n                title: $(ev.currentTarget).data(\"confirm-title\"),\n                message: $(ev.currentTarget).data(\"confirm-message\"),\n                inputType: 'radio',\n                inputOptions: [\n                    {\n                        text: $(ev.currentTarget).data(\"name-classic\"),\n                        value: 'layout-classic',\n                    },\n                    {\n                        text: $(ev.currentTarget).data(\"name-dbjr\"),\n                        value: 'layout-dbjr',\n                    }\n                ],\n                callback: (result) => {\n                    if (result) {\n                        const $defaults = $('<input type=\"hidden\" name=\"defaults\" value=\"1\">').attr(\"value\", result);\n                        this.$form.append('<input type=\"hidden\" name=\"resetTheme\" value=\"1\">');\n                        this.$form.append($defaults);\n                        this.$form.trigger(\"submit\");\n                    }\n                }\n            } as BootboxPromptOptions; // Typings of Bootbox don't support \"message\"\n            bootbox.prompt(options);\n        });\n    }\n}\n"]}