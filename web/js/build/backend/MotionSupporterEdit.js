define(["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MotionSupporterEdit=void 0;t.MotionSupporterEdit=class{constructor(e){this.$supporterHolder=e;let t=this.$supporterHolder.find("> ul");t.length>0&&Sortable.create(t[0],{draggable:"li"}),$(".supporterRowAdder").on("click",(function(e){t.append($(this).data("content")),e.preventDefault()})),t.on("click",".delSupporter",(function(e){e.preventDefault(),$(this).parents("li").first().remove()}));let r=$("#supporterFullTextHolder");e.find(".fullTextAdd").on("click",(()=>{let e=r.find("textarea").val().split(";"),l=$(".supporterRowAdder").data("content"),n=function(){let e=t.find("> li");for(let t=0;t<e.length;t++){let r=e.eq(t);if(""==r.find(".supporterName").val()&&""==r.find(".supporterOrga").val())return r}let r=$(l);return t.append(r),r},o=null;for(let t=0;t<e.length;t++){if(""==e[t])continue;let r=n();null==o&&(o=r);let l=e[t].split(","),i=l.shift();if(r.find("input.supporterName").val(i.trim()),r.find("input.supporterOrga").length>0&&l.length>0){let e=l.shift();r.find("input.supporterOrga").val(e.trim())}r.find(".colGender").length>0&&l.length>0&&r.find(".colGender").find("select").val(l[0])}r.find("textarea").trigger("select").trigger("focus"),o.scrollintoview()}));const l=e.find(".fullTextCopy"),n=new ClipboardJS(l[0],{text:function(){let t=[];return e.find(".supporterRow").each(((e,r)=>{let l=$(r),n=[];l.find(".supporterName").length&&n.push(l.find(".supporterName").val().replace(/,/," ").replace(/;/," ")),l.find(".supporterOrga").length&&n.push(l.find(".supporterOrga").val().replace(/,/," ").replace(/;/," ")),l.find(".colGender").length&&n.push(l.find(".colGender select").val()),t.push(n.join(","))})),t.join(";")}});n.on("success",(()=>{l.addClass("done"),window.setTimeout((()=>{l.removeClass("done")}),1e3)})),n.on("error",(()=>{alert("Could not copy the URL to the clipboard")})),$('[data-toggle="tooltip"]').tooltip()}}}));
//# sourceMappingURL=MotionSupporterEdit.js.map
