{"version":3,"sources":["backend/AppearanceEdit.js","backend/AppearanceEdit.ts"],"names":["define","require","exports","Object","defineProperty","value","AppearanceEdit","constructor","$form","this","initLogoUpload","initLayoutChooser","initTranslationService","initRestApi","initSpeechQueues","initResolutions","$","tooltip","$logoRow","find","$uploadLabel","on","ev","preventDefault","src","currentTarget","attr","val","length","prepend","removeClass","text","data","path","split","filename","addClass","$inputs","$editLink","editLinkDefault","onChange","$selected","filter","first","replace","prop","trigger"],"mappings":"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","file":"AppearanceEdit.js","sourcesContent":[null,"export class AppearanceEdit {\n    constructor(private $form: JQuery) {\n        this.initLogoUpload();\n        this.initLayoutChooser();\n        this.initTranslationService();\n        this.initRestApi();\n        this.initSpeechQueues();\n        this.initResolutions();\n\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n\n    private initLogoUpload() {\n        const $logoRow = this.$form.find('.logoRow'),\n            $uploadLabel = $logoRow.find('.uploadCol label .text');\n        $logoRow.on('click', '.imageChooserDd ul    a', ev => {\n            ev.preventDefault();\n            const src = $(ev.currentTarget).find(\"img\").attr(\"src\");\n            $logoRow.find('input[name=consultationLogo]').val(src);\n            if ($logoRow.find('.logoPreview img').length === 0) {\n                $logoRow.find('.logoPreview').prepend('<img src=\"\" alt=\"\">');\n            }\n            $logoRow.find('.logoPreview img').attr('src', src).removeClass('hidden');\n            $uploadLabel.text($uploadLabel.data('title'));\n            $logoRow.find(\"input[type=file]\").val('');\n        });\n        $logoRow.find(\"input[type=file]\").on(\"change\", () => {\n            const path = ($logoRow.find(\"input[type=file]\").val() as string).split('\\\\');\n            const filename = path[path.length - 1];\n            $logoRow.find('input[name=consultationLogo]').val('');\n            $logoRow.find(\".logoPreview img\").addClass('hidden');\n            $uploadLabel.text(filename);\n        });\n    }\n\n    private initLayoutChooser() {\n        const $inputs = this.$form.find(\".thumbnailedLayoutSelector input\");\n        const $editLink = this.$form.find(\".editThemeLink\");\n        const editLinkDefault = $editLink.attr(\"href\");\n        const onChange = () => {\n            let $selected = $inputs.filter(\":checked\");\n            if ($selected.length === 0) {\n                $selected = $inputs.first();\n            }\n            $editLink.attr(\"href\", editLinkDefault.replace(/DEFAULT/, $selected.val() as string));\n        };\n        $inputs.on(\"change\", onChange);\n        onChange();\n    }\n\n    private initTranslationService() {\n        this.$form.find(\"#translationService\").on('change', (ev) => {\n            const checked = $(ev.currentTarget).prop(\"checked\");\n            if (checked) {\n                this.$form.find(\".services\").removeClass(\"hidden\");\n                this.$form.find(\".services input\").prop(\"required\", true);\n            } else {\n                this.$form.find(\".services\").addClass(\"hidden\");\n                this.$form.find(\".services input\").prop(\"required\", false);\n            }\n        }).trigger(\"change\");\n    }\n\n    private initRestApi() {\n        this.$form.find(\"#apiEnabled\").on('change', (ev) => {\n            const checked = $(ev.currentTarget).prop(\"checked\");\n            if (checked) {\n                this.$form.find(\".apiBaseUrl\").removeClass(\"hidden\");\n            } else {\n                this.$form.find(\".apiBaseUrl\").addClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private initSpeechQueues() {\n        this.$form.find(\"#hasSpeechLists\").on('change', (ev) => {\n            const checked = $(ev.currentTarget).prop(\"checked\");\n            if (checked) {\n                this.$form.find(\".quotas\").removeClass(\"hidden\");\n            } else {\n                this.$form.find(\".quotas\").addClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n\n        this.$form.find(\"#hasMultipleSpeechLists\").on('change', (ev) => {\n            const checked = $(ev.currentTarget).prop(\"checked\");\n            if (checked) {\n                this.$form.find(\".quotaName\").removeClass(\"hidden\");\n            } else {\n                this.$form.find(\".quotaName\").addClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n\n    private initResolutions() {\n        this.$form.find(\"#showResolutionsCombined\").on('change', (ev) => {\n            if ($(ev.currentTarget).prop(\"checked\")) {\n                this.$form.find(\".showResolutionsSeparateHolder\").addClass(\"hidden\");\n            } else {\n                this.$form.find(\".showResolutionsSeparateHolder\").removeClass(\"hidden\");\n            }\n        }).trigger(\"change\");\n    }\n}\n"]}