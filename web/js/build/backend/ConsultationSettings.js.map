{"version":3,"sources":["backend/ConsultationSettings.ts"],"names":["ConsultationSettings","$form","$","click","ev","preventDefault","addClass","removeClass","submit","i","items","pillbox","tags","$node","length","push","id","name","text","attr","JSON","stringify","append","Sortable","create","document","getElementById","draggable","$adminsMayEdit","$iniatorsMayEdit","parents","first","parent","change","this","prop","confirmMessage","__t","bootbox","confirm","result","find","tooltip","exports"],"mappings":"yGAIA,IAAAA,EACI,WACI,IAAIC,EAAQC,EAAE,6BAEdA,EAAE,4BAA4BC,MAAM,SAAUC,GAC1CA,EAAGC,iBACHH,EAAE,0BAA0BI,SAAS,UACrCJ,EAAE,0BAA0BK,YAAY,YAG5CN,EAAMO,OAAO,WACT,IAGIC,EAHAC,EAAQR,EAAE,aAAaS,QAAQ,SAC/BC,EAAO,GACPC,EAAQX,EAAE,qCAEd,IAAKO,EAAI,EAAGA,EAAIC,EAAMI,OAAQL,SACC,IAAhBC,EAAMD,GAAK,GAClBG,EAAKG,KAAK,CAACC,GAAM,EAAGC,KAAQP,EAAMD,GAAGS,OAErCN,EAAKG,KAAK,CAACC,GAAMN,EAAMD,GAAGO,GAAIC,KAAQP,EAAMD,GAAGS,OAGvDL,EAAMM,KAAK,QAASC,KAAKC,UAAUT,IACnCX,EAAMqB,OAAOT,KAGjBU,SAASC,OAAOC,SAASC,eAAe,cAAe,CAACC,UAAW,UAEnE,IAAIC,EAAiB1B,EAAE,kBACnB2B,EAAmB3B,EAAE,oBAAoB4B,QAAQ,SAASC,QAAQC,SACtEJ,EAAeK,OAAO,WAClB,GAAI/B,EAAEgC,MAAMC,KAAK,WACbN,EAAiBtB,YAAY,cAC1B,CACH,IAAI6B,EAAiBC,IAAI,QAAS,uBAClCC,QAAQC,QAAQH,EAAgB,SAAUI,GAClCA,GACAX,EAAiBvB,SAAS,UAC1BuB,EAAiBY,KAAK,SAASN,KAAK,WAAW,IAE/CP,EAAeO,KAAK,WAAW,QAK1CP,EAAeO,KAAK,YAAYN,EAAiBvB,SAAS,UAE/DJ,EAAE,qBAAqB+B,OAAO,WACtB/B,EAAEgC,MAAMC,KAAK,WACbjC,EAAE,mBAAmBK,YAAY,UAEjCL,EAAE,mBAAmBI,SAAS,YAEnC2B,SAEH/B,EAAE,2BAA2BwC,WAKrC,IA5DaC,EAAA3C,qBAAAA","file":"ConsultationSettings.js","sourcesContent":["/// <reference path=\"../typings/fuelux/index.d.ts\" />\n\ndeclare let Sortable: any;\n\nexport class ConsultationSettings {\n    constructor() {\n        let $form = $(\"#consultationSettingsForm\");\n\n        $('.urlPathHolder .shower a').click(function (ev) {\n            ev.preventDefault();\n            $('.urlPathHolder .shower').addClass('hidden');\n            $('.urlPathHolder .holder').removeClass('hidden');\n        });\n\n        $form.submit(function () {\n            let items = $(\"#tagsList\").pillbox('items'),\n                tags = [],\n                $node = $('<input type=\"hidden\" name=\"tags\">'),\n                i;\n            for (i = 0; i < items.length; i++) {\n                if (typeof(items[i].id) == 'undefined') {\n                    tags.push({\"id\": 0, \"name\": items[i].text});\n                } else {\n                    tags.push({\"id\": items[i].id, \"name\": items[i].text});\n                }\n            }\n            $node.attr(\"value\", JSON.stringify(tags));\n            $form.append($node);\n        });\n\n        Sortable.create(document.getElementById(\"tagsListUl\"), {draggable: '.pill'});\n\n        let $adminsMayEdit = $(\"#adminsMayEdit\"),\n            $iniatorsMayEdit = $(\"#iniatorsMayEdit\").parents(\"label\").first().parent();\n        $adminsMayEdit.change(function () {\n            if ($(this).prop(\"checked\")) {\n                $iniatorsMayEdit.removeClass(\"hidden\");\n            } else {\n                let confirmMessage = __t(\"admin\", \"adminMayEditConfirm\");\n                bootbox.confirm(confirmMessage, function (result) {\n                    if (result) {\n                        $iniatorsMayEdit.addClass(\"hidden\");\n                        $iniatorsMayEdit.find(\"input\").prop(\"checked\", false);\n                    } else {\n                        $adminsMayEdit.prop(\"checked\", true);\n                    }\n                });\n            }\n        });\n        if (!$adminsMayEdit.prop(\"checked\")) $iniatorsMayEdit.addClass(\"hidden\");\n\n        $(\"#singleMotionMode\").change(function () {\n            if ($(this).prop(\"checked\")) {\n                $(\"#forceMotionRow\").removeClass(\"hidden\");\n            } else {\n                $(\"#forceMotionRow\").addClass(\"hidden\");\n            }\n        }).change();\n\n        $('[data-toggle=\"tooltip\"]').tooltip();\n    }\n}\n\n\nnew ConsultationSettings();"]}