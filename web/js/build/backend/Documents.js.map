{"version":3,"sources":["backend/Documents.js","backend/Documents.ts"],"names":["define","require","exports","Object","defineProperty","value","Documents","constructor","this","initGroupAdder","document","querySelectorAll","forEach","groupHolder","initGroupHolder","fileHolder","initFileHolder","deleteGroupForm","querySelector","addEventListener","ev","preventDefault","stopPropagation","$button","$","currentTarget","bootbox","confirm","data","result","$input","attr","append","trigger","addForm","title","submitBtn","fileUploadForm","path","split","innerText","length","classList","remove","deleteBtn","parents","openerBtn","form","add","window","setTimeout","focus"],"mappings":"AAAAA,OAAO,CAAC,UAAW,YAAY,SAAUC,EAASC,GAC9C,aACAC,OAAOC,eAAeF,EAAS,aAAc,CAAEG,OAAO,IACtDH,EAAQI,eAAY,ECHxB,MAAaA,EACT,WAAAC,GACIC,KAAKC,iBAELC,SAASC,iBAAiB,oBAAoBC,SAASC,IACnDL,KAAKM,gBAAgBD,EAAY,IAErCH,SAASC,iBAAiB,sBAAsBC,SAASG,IACrDP,KAAKQ,eAAeD,EAAW,GAEvC,CAEQ,eAAAD,CAAgBD,GAEpB,MAAMI,EAAkBJ,EAAYK,cAAc,oBAClDD,EAAgBC,cAAc,mBAAmBC,iBAAiB,SAASC,IACvEA,EAAGC,iBACHD,EAAGE,kBAEH,IAAIC,EAAUC,EAAEJ,EAAGK,eACnBC,QAAQC,QAAQJ,EAAQK,KAAK,gBAAgB,SAAUC,GACnD,GAAIA,EAAQ,CACR,MAAMC,EAASN,EAAE,yBAAyBO,KAAK,OAAQR,EAAQQ,KAAK,SAASA,KAAK,QAAS,KAC3FP,EAAEP,GAAiBe,OAAOF,GAC1BN,EAAEP,GAAiBgB,QAAQ,SAC/B,CACJ,GAAE,IAGN,MAAMC,EAAUrB,EAAYK,cAAc,gBACtCiB,EAAQD,EAAQhB,cAAc,aAC9BkB,EAAYF,EAAQhB,cAAc,cAEhCmB,EAAiBxB,EAAYK,cAAc,gBACjDmB,EAAenB,cAAc,oBAAoBC,iBAAiB,UAAUC,IACxE,MACMkB,EADQlB,EAAGK,cACEpB,MAAMkC,MAAM,MAC9BF,EAAenB,cAAc,SAAyBsB,UAAYF,EAAKA,EAAKG,OAAS,GAEtFN,EAAMO,UAAUC,OAAO,UACvBP,EAAUM,UAAUC,OAAO,SAAS,GAE5C,CAEQ,cAAA3B,CAAeD,GACnB,MAAM6B,EAAY7B,EAAWG,cAAc,kBAC3C0B,EAAUzB,iBAAiB,SAASC,IAChCA,EAAGC,iBACHD,EAAGE,kBAEH,IAAIC,EAAUC,EAAEJ,EAAGK,eACnBC,QAAQC,QAAQJ,EAAQK,KAAK,gBAAgB,SAAUC,GACnD,GAAIA,EAAQ,CACR,MAAMC,EAASN,EAAE,yBAAyBO,KAAK,OAAQR,EAAQQ,KAAK,SAASA,KAAK,QAAS,KAC3FP,EAAEoB,GAAWC,QAAQ,QAAQb,OAAOF,GACpCN,EAAEoB,GAAWC,QAAQ,QAAQZ,QAAQ,SACzC,CACJ,GAAE,GAEV,CAEQ,cAAAxB,GAEJ,MAAMqC,EAAYpC,SAASQ,cAAc,uBACrC6B,EAAOrC,SAASQ,cAAc,wBAElC4B,EAAU3B,iBAAiB,SAAS,KAChC2B,EAAUJ,UAAUM,IAAI,UACxBD,EAAKL,UAAUC,OAAO,UACtBM,OAAOC,YAAW,KACExC,SAASQ,cAAc,yCAC/BiC,OAAO,GAChB,GAAG,GAEd,EA1EJjD,EAAAI,UAAAA,EA8EA,IAAIA,CDXJ","file":"Documents.js","sourcesContent":[null,"export class Documents {\n    constructor() {\n        this.initGroupAdder();\n\n        document.querySelectorAll('.fileGroupHolder').forEach((groupHolder: HTMLElement) => {\n            this.initGroupHolder(groupHolder);\n        });\n        document.querySelectorAll('.uploadedFileEntry').forEach((fileHolder: HTMLElement) => {\n            this.initFileHolder(fileHolder);\n        });\n    }\n\n    private initGroupHolder(groupHolder: HTMLElement): void\n    {\n        const deleteGroupForm = groupHolder.querySelector('.deleteGroupForm') as HTMLFormElement;\n        deleteGroupForm.querySelector('.deleteGroupBtn').addEventListener('click', ev => {\n            ev.preventDefault();\n            ev.stopPropagation();\n\n            let $button = $(ev.currentTarget);\n            bootbox.confirm($button.data('confirm-msg'), function (result) {\n                if (result) {\n                    const $input = $('<input type=\"hidden\">').attr(\"name\", $button.attr(\"name\")).attr(\"value\", \"1\");\n                    $(deleteGroupForm).append($input);\n                    $(deleteGroupForm).trigger(\"submit\");\n                }\n            });\n        });\n\n        const addForm = groupHolder.querySelector('.fileAddForm'),\n            title = addForm.querySelector('.titleCol'),\n            submitBtn = addForm.querySelector('.btnUpload');\n\n        const fileUploadForm = groupHolder.querySelector('.fileAddForm') as HTMLFormElement;\n        fileUploadForm.querySelector(\"input[type=file]\").addEventListener(\"change\", ev => {\n            const input = ev.currentTarget as HTMLInputElement;\n            const path = input.value.split('\\\\');\n            (fileUploadForm.querySelector('.text') as HTMLElement).innerText = path[path.length - 1];\n\n            title.classList.remove('hidden');\n            submitBtn.classList.remove('hidden');\n        });\n    }\n\n    private initFileHolder(fileHolder: HTMLElement): void {\n        const deleteBtn = fileHolder.querySelector('.deleteFileBtn') as HTMLFormElement;\n        deleteBtn.addEventListener('click', ev => {\n            ev.preventDefault();\n            ev.stopPropagation();\n\n            let $button = $(ev.currentTarget);\n            bootbox.confirm($button.data('confirm-msg'), function (result) {\n                if (result) {\n                    const $input = $('<input type=\"hidden\">').attr(\"name\", $button.attr(\"name\")).attr(\"value\", \"1\");\n                    $(deleteBtn).parents(\"form\").append($input);\n                    $(deleteBtn).parents(\"form\").trigger(\"submit\");\n                }\n            });\n        });\n    }\n\n    private initGroupAdder(): void\n    {\n        const openerBtn = document.querySelector('.btnFileGroupCreate'),\n            form = document.querySelector('.fileGroupCreateForm');\n\n        openerBtn.addEventListener('click', () => {\n            openerBtn.classList.add('hidden');\n            form.classList.remove('hidden');\n            window.setTimeout(() => {\n                const element = document.querySelector('.fileGroupCreateForm input[type=text]') as HTMLInputElement;\n                element.focus();\n            }, 50);\n        });\n    }\n}\n\n\nnew Documents();\n"]}