{"version":3,"sources":["frontend/AccountEdit.ts"],"names":["AccountEdit","constructor","pwMinLen","$","data","on","this","prop","trigger","$emailExisting","length","$changeRow","addClass","ev","preventDefault","removeClass","find","focus","pwd","val","pwd2","bootbox","alert","__t","replace","document","querySelector","addEventListener","classList","add","remove"],"mappings":"AAAA,MAAMA,YACF,WAAAC,GACI,IAAIC,EAAWC,EAAE,YAAYC,KAAK,WAElCD,EAAE,uDAAuDE,GAAG,UAAU,WAC9DF,EAAEG,MAAMC,KAAK,WACbJ,EAAE,iDAAiDI,KAAK,YAAY,GAEpEJ,EAAE,iDAAiDI,KAAK,YAAY,EAE5E,IAAGC,QAAQ,UAEX,IAAIC,EAAiBN,EAAE,qBACvB,GAA6B,GAAzBM,EAAeC,OAAa,CAC5B,IAAIC,EAAaR,EAAE,mBACnBQ,EAAWC,SAAS,UACpBT,EAAE,uBAAuBE,GAAG,SAAUQ,IAClCA,EAAGC,iBACHH,EAAWI,YAAY,UACvBN,EAAeG,SAAS,UACxBD,EAAWK,KAAK,SAASC,OAAO,GAExC,CAEAd,EAAE,oBAAoBE,GAAG,UAAU,SAAUQ,GACzC,IAAIK,EAAMf,EAAE,YAAYgB,MACpBC,EAAOjB,EAAE,aAAagB,MACf,IAAPD,GAAqB,IAARE,IACTF,EAAIR,OAASR,GACbW,EAAGC,iBACHO,QAAQC,MAAMC,IAAI,MAAO,cAAcC,QAAQ,QAAStB,KACjDgB,GAAOE,IACdP,EAAGC,iBACHO,QAAQC,MAAMC,IAAI,MAAO,iBAGrC,IAEIE,SAASC,cAAc,qBACvBD,SAASC,cAAc,oBAAoBC,iBAAiB,SAAS,KACjEF,SAASC,cAAc,4BAA4BE,UAAUC,IAAI,UACjEJ,SAASC,cAAc,0BAA0BE,UAAUE,OAAO,SAAS,IAG/EL,SAASC,cAAc,sBACvBD,SAASC,cAAc,qBAAqBC,iBAAiB,SAAS,KAClEF,SAASC,cAAc,6BAA6BE,UAAUC,IAAI,UAClEJ,SAASC,cAAc,2BAA2BE,UAAUE,OAAO,SAAS,GAGxF,EAGJ,IAAI9B","file":"AccountEdit.js","sourcesContent":["class AccountEdit {\n    constructor() {\n        let pwMinLen = $(\"#userPwd\").data(\"min-len\");\n\n        $('.accountDeleteForm input[name=accountDeleteConfirm]').on(\"change\", function () {\n            if ($(this).prop(\"checked\")) {\n                $(\".accountDeleteForm button[name=accountDelete]\").prop(\"disabled\", false);\n            } else {\n                $(\".accountDeleteForm button[name=accountDelete]\").prop(\"disabled\", true);\n            }\n        }).trigger('change');\n\n        let $emailExisting = $('.emailExistingRow');\n        if ($emailExisting.length == 1) {\n            let $changeRow = $('.emailChangeRow');\n            $changeRow.addClass('hidden');\n            $(\".requestEmailChange\").on(\"click\", (ev) => {\n                ev.preventDefault();\n                $changeRow.removeClass(\"hidden\");\n                $emailExisting.addClass(\"hidden\");\n                $changeRow.find(\"input\").focus();\n            });\n        }\n\n        $('.userAccountForm').on('submit', function (ev) {\n            let pwd = $(\"#userPwd\").val() as string,\n                pwd2 = $(\"#userPwd2\").val() as string;\n            if (pwd != '' || pwd2 != '') {\n                if (pwd.length < pwMinLen) {\n                    ev.preventDefault();\n                    bootbox.alert(__t(\"std\", \"pw_x_chars\").replace(/%NUM%/, pwMinLen));\n                } else if (pwd != pwd2) {\n                    ev.preventDefault();\n                    bootbox.alert(__t(\"std\", \"pw_no_match\"));\n                }\n            }\n        });\n\n        if (document.querySelector('.btn2FaAdderOpen')) {\n            document.querySelector('.btn2FaAdderOpen').addEventListener('click', () => {\n                document.querySelector('.secondFactorAdderOpener').classList.add('hidden');\n                document.querySelector('.secondFactorAdderBody').classList.remove('hidden');\n            });\n        }\n        if (document.querySelector('.btn2FaRemoveOpen')) {\n            document.querySelector('.btn2FaRemoveOpen').addEventListener('click', () => {\n                document.querySelector('.secondFactorRemoveOpener').classList.add('hidden');\n                document.querySelector('.secondFactorRemoveBody').classList.remove('hidden');\n            });\n        }\n    }\n}\n\nnew AccountEdit();\n"]}