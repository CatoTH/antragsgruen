{"version":3,"sources":["frontend/LineNumberHighlighting.ts"],"names":["LineNumberHighlighting","constructor","$panel","$","$lineInput","find","panelIsOpen","window","addEventListener","ev","key","$target","target","is","parents","length","addClass","trigger","setTimeout","val","on","preventDefault","lineNumber","removeClass","$lineNumber","scrollintoview","top_offset"],"mappings":"OAAM,MAAOA,uBACT,WAAAC,GACI,IAAIC,EAASC,EAAE,uBACXC,EAAaF,EAAOG,KAAK,0BACzBC,GAAc,EAClBC,OAAOC,iBAAiB,UAAYC,IAChC,IAAKH,GAAeG,EAAGC,KAAO,KAAOD,EAAGC,KAAO,IAAK,CAChD,IAAIC,EAAUR,EAAEM,EAAGG,QACnB,GAAID,EAAQE,GAAG,mDAAqDF,EAAQG,QAAQ,kDAAkDC,OAAS,EAE3I,OAGJb,EAAOc,SAAS,UAChBV,GAAc,EACdF,EAAWa,QAAQ,SACnBV,OAAOW,WAAW,KACdd,EAAWe,IAAIV,EAAGC,MACnB,EACP,CACIJ,GACAJ,EAAOG,KAAK,uBAAuBW,SAAS,YAGpDd,EAAOkB,GAAG,SAAWX,IACjBA,EAAGY,iBACH,IAAIC,EAAalB,EAAWe,MAC5B,GAAmB,KAAfG,EAGA,OAFApB,EAAOqB,YAAY,eACnBjB,GAAc,GAIlB,IAAIkB,EAAcrB,EAAE,gCAAkCmB,EAAa,KACxC,IAAvBE,EAAYT,QAIhBb,EAAOqB,YAAY,UACnBjB,GAAc,EAEdkB,EAAYC,eAAe,CAACC,YAAa,MACzCF,EAAYR,SAAS,eACrBT,OAAOW,WAAW,KACdM,EAAYR,SAAS,uBACtB,IACHT,OAAOW,WAAW,KACdM,EAAYD,YAAY,uBACzB,KACHhB,OAAOW,WAAW,KACdM,EAAYD,YAAY,gBACzB,OAhBCrB,EAAOG,KAAK,uBAAuBkB,YAAY,WAkB3D","file":"LineNumberHighlighting.js","sourcesContent":["export class LineNumberHighlighting {\n    constructor() {\n        let $panel = $(\".gotoLineNumerPanel\"),\n            $lineInput = $panel.find(\"input[name=lineNumber]\"),\n            panelIsOpen = false;\n        window.addEventListener('keydown', (ev) => {\n            if (!panelIsOpen && ev.key >= '0' && ev.key <= '9') {\n                let $target = $(ev.target);\n                if ($target.is('input, textarea, div.texteditor, .cke_editable') || $target.parents('input, textarea, div.texteditor, .cke_editable').length > 0) {\n                    // Typing in an input field, like comments\n                    return;\n                }\n\n                $panel.addClass(\"active\");\n                panelIsOpen = true;\n                $lineInput.trigger(\"focus\");\n                window.setTimeout(() => {\n                    $lineInput.val(ev.key);\n                }, 1);\n            }\n            if (panelIsOpen) {\n                $panel.find('.lineNumberNotFound').addClass('hidden');\n            }\n        });\n        $panel.on('submit', (ev) => {\n            ev.preventDefault();\n            let lineNumber = $lineInput.val();\n            if (lineNumber === '') {\n                $panel.removeClass(\"active\");\n                panelIsOpen = false;\n                return;\n            }\n\n            let $lineNumber = $(\".lineNumber[data-line-number=\" + lineNumber + \"]\");\n            if ($lineNumber.length === 0) {\n                $panel.find('.lineNumberNotFound').removeClass('hidden');\n                return;\n            }\n            $panel.removeClass(\"active\");\n            panelIsOpen = false;\n\n            $lineNumber.scrollintoview({top_offset: -100});\n            $lineNumber.addClass(\"highlighted\");\n            window.setTimeout(() => {\n                $lineNumber.addClass(\"highlighted-active\");\n            }, 50);\n            window.setTimeout(() => {\n                $lineNumber.removeClass(\"highlighted-active\");\n            }, 2000);\n            window.setTimeout(() => {\n                $lineNumber.removeClass(\"highlighted\");\n            }, 2500);\n        });\n    }\n}\n"]}