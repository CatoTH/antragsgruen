{"version":3,"sources":["frontend/ContentPageEdit.js","frontend/ContentPageEdit.ts"],"names":["__awaiter","this","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","define","require","exports","Object","defineProperty","ContentPageEdit","constructor","$form","on","preventDefault","$textSaver","$","data","$textHolder","$editCaller","$contentSettings","find","$downloadableFiles","$allConsultationsCheckbox","$policyWidget","editCalled","bind","addClass","save","length","initContentSettings","initDownloadableFiles","PolicySetter","onSubmitDeleteForm","ev","attr","editor","CKEDITOR","inline","versionCheck","scayt_sLang","removePlugins","extraPlugins","uploadUrl","filebrowserBrowseUrl","toolbarGroups","name","groups","evt","val","trigger","removeClass","prop","showDownloadableFiles","$input","currentTarget","replace","$uploadLabel","path","split","filename","text","id","parents","first","delConfirm","bootbox","confirm","deleteDownloadableFile","deleteUrl","params","_csrf","post","ret","remove","children","alert","addUploadedFileCb","$el","append","hideDownloadableFiles","readUploadableFile","input","reader","FileReader","onload","x","files","readAsDataURL","getData","uploadedFile","window","setTimeout","destroy","document","querySelector","classList","contains","title","last","location","href","confirmed","__t"],"mappings":"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","file":"ContentPageEdit.js","sourcesContent":[null,"import editor = CKEDITOR.editor;\nimport config = CKEDITOR.config;\nimport '../shared/PolicySetter';\n\nexport class ContentPageEdit {\n    private $editCaller: JQuery;\n    private $textHolder: JQuery;\n    private $textSaver: JQuery;\n    private $contentSettings: JQuery;\n    private $downloadableFiles: JQuery;\n    private $policyWidget: JQuery;\n    private $allConsultationsCheckbox: JQuery;\n    private editor: editor;\n\n    constructor(private $form: JQuery) {\n        $form.on(\"submit\", e => e.preventDefault()); // necessary for IE11\n        this.$textSaver = $(this.$form.data('save-selector'));\n        this.$textHolder = $(this.$form.data('text-selector'));\n        this.$editCaller = $(this.$form.data('edit-selector'));\n        this.$contentSettings = $form.find('.contentSettingsToolbar');\n        this.$downloadableFiles = $form.find('.downloadableFiles');\n        this.$allConsultationsCheckbox = $form.find('input[name=allConsultations]');\n        this.$policyWidget = $form.find('.policyWidget');\n\n        this.$editCaller.on(\"click\", this.editCalled.bind(this));\n        this.$textSaver.addClass('hidden');\n        this.$textSaver.find('button').on(\"click\", this.save.bind(this));\n\n        if (this.$contentSettings.length > 0) {\n            this.initContentSettings();\n        }\n        if (this.$downloadableFiles.length > 0) {\n            this.initDownloadableFiles();\n        }\n        if (this.$policyWidget.length > 0) {\n            new PolicySetter(this.$policyWidget);\n        }\n\n        $(\".deletePageForm\").on(\"submit\", this.onSubmitDeleteForm.bind(this));\n    }\n\n    private editCalled(ev) {\n        ev.preventDefault();\n        this.$editCaller.addClass('hidden');\n        this.$textHolder.attr('contenteditable', \"true\");\n\n        this.editor = CKEDITOR.inline(this.$textHolder.attr('id'), {\n            versionCheck: false,\n            scayt_sLang: 'de_DE',\n            removePlugins: 'lite,showbloks,about,selectall,forms',\n            extraPlugins: 'uploadimage',\n            uploadUrl: this.$form.data('upload-url'),\n            filebrowserBrowseUrl: this.$form.data('image-browse-url'),\n            //filebrowserUploadUrl: '/uploader/upload.php?type=Files',\n            toolbarGroups: [\n                {name: 'basicstyles', groups: ['basicstyles', 'cleanup']},\n                {name: 'colors'},\n                {name: 'links'},\n                {name: 'insert'},\n                {name: 'others'},\n                {name: 'tools'},\n                '/',\n                {name: 'styles'},\n                {name: 'paragraph', groups: ['list', 'indent', 'blocks', 'align', 'bidi']}\n            ]\n        } as config);\n        this.editor.on('fileUploadRequest', (evt) => {\n            evt.data['requestData']['_csrf'] = this.$form.find('> input[name=_csrf]').val();\n        });\n\n        this.$textHolder.trigger(\"focus\");\n        this.$textSaver.removeClass('hidden');\n        this.$contentSettings.removeClass('hidden');\n        if (!this.$allConsultationsCheckbox.prop('checked')) {\n            this.$policyWidget.removeClass('hidden');\n        }\n        this.showDownloadableFiles();\n    }\n\n    private initContentSettings() {\n        this.$contentSettings.find('input[name=url]').on('keyup change keypress', (ev) => {\n            let $input = $(ev.currentTarget);\n            $input.val(($input.val() as string).replace(/[^\\w_\\-,\\.äöüß]/, ''));\n        });\n        this.$allConsultationsCheckbox.on('change', () => {\n            if (this.$allConsultationsCheckbox.prop('checked')) {\n                this.$policyWidget.addClass('hidden');\n            } else {\n                this.$policyWidget.removeClass('hidden');\n            }\n        });\n    }\n\n    private initDownloadableFiles() {\n        const $uploadLabel = this.$downloadableFiles.find(\".uploadCol .text\");\n        this.$downloadableFiles.find(\"input[type=file]\").on(\"change\", () => {\n            const path = (this.$downloadableFiles.find(\"input[type=file]\").val() as string).split('\\\\');\n            const filename = path[path.length - 1];\n            $uploadLabel.text(filename);\n        });\n\n        this.$downloadableFiles.find(\".fileList\").on(\"click\", \".deleteFile\", (ev) => {\n            const id = $(ev.currentTarget).parents(\"li\").first().data(\"id\");\n            const delConfirm = this.$form.data(\"del-confirmation\");\n\n            bootbox.confirm(delConfirm, result => {\n                if (result) {\n                    this.deleteDownloadableFile(id);\n                }\n            });\n        });\n    }\n\n    private deleteDownloadableFile(id: string) {\n        const deleteUrl = this.$form.data(\"file-delete-url\");\n        const params = {\n\n            \"id\": id,\n            \"_csrf\": this.$form.find('> input[name=_csrf]').val(),\n        };\n\n        $.post(deleteUrl, params, (ret) => {\n            if (ret['success']) {\n                this.$downloadableFiles.find(\".fileList li[data-id=\" + id + \"]\").remove();\n\n                if (this.$downloadableFiles.find(\".fileList\").children().length === 0) {\n                    this.$downloadableFiles.find(\".none\").removeClass(\"hidden\");\n                }\n            } else {\n                alert(ret['message']);\n            }\n        });\n    }\n\n    private addUploadedFileCb(data) {\n        const $el = $('<li><a><span class=\"glyphicon glyphicon-download-alt\"></span> <span class=\"title\"></span></a>' +\n            '<button type=\"button\" class=\"btn btn-link deleteFile\"><span class=\"glyphicon glyphicon-trash\"></span></button></li>');\n        $el.find(\"a\").attr(\"href\", data['url']);\n        $el.find(\"a .title\").text(data['title']);\n        $el.attr(\"data-id\", data['id']);\n\n        this.$downloadableFiles.find(\"ul\").append($el);\n        this.$downloadableFiles.find(\".none\").addClass('hidden');\n    }\n\n    private hideDownloadableFiles() {\n        const hasFiles = (this.$downloadableFiles.find('ul li').length > 0);\n        if (!hasFiles) {\n            this.$downloadableFiles.addClass('hidden');\n        }\n        this.$downloadableFiles.find('.downloadableFilesUpload').addClass('hidden');\n        this.$downloadableFiles.find('#downloadableFileNew').val(\"\");\n        this.$downloadableFiles.find('#downloadableFileTitle').val(\"\");\n        this.$downloadableFiles.find(\".uploadCol .text\").text(this.$downloadableFiles.find(\".uploadCol .text\").data(\"title\"));\n    }\n\n    private showDownloadableFiles() {\n        this.$downloadableFiles.removeClass('hidden');\n        this.$downloadableFiles.find('.downloadableFilesUpload').removeClass('hidden');\n    }\n\n    private async readUploadableFile(input: HTMLInputElement): Promise<string> {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            reader.onload = function () {\n                const data = reader.result as string;\n                const x = data.split(\";base64,\");\n                if (x.length === 2) {\n                    resolve(x[1]);\n                } else {\n                    alert(\"Could not read the given file\");\n                    resolve(null);\n                }\n            };\n            if (input.files.length > 0) {\n                reader.readAsDataURL(input.files[0]);\n            } else {\n                resolve(null);\n            }\n        });\n    }\n\n    private async save(ev) {\n        ev.preventDefault();\n        let data = {\n            'data': this.editor.getData(),\n            '_csrf': this.$form.find('> input[name=_csrf]').val()\n        };\n        if (this.$contentSettings.length > 0) {\n            data['url'] = this.$contentSettings.find('input[name=url]').val();\n            data['title'] = this.$contentSettings.find('input[name=title]').val();\n            data['allConsultations'] = (this.$allConsultationsCheckbox.prop('checked') ? 1 : 0);\n            data['inMenu'] = (this.$contentSettings.find('input[name=inMenu]').prop('checked') ? 1 : 0);\n        }\n        if (this.$policyWidget.length > 0) {\n            data['policyReadPage'] = {\n                'id': this.$policyWidget.find('.policySelect').val(),\n                'groups': this.$policyWidget.find('.userGroupSelect select').val(),\n            };\n        }\n        if (this.$downloadableFiles.length > 0) {\n            const input = this.$downloadableFiles.find(\"input[type=file]\")[0] as HTMLInputElement;\n            const uploadedFile = await this.readUploadableFile(input);\n\n            if (uploadedFile) {\n                const path = (this.$downloadableFiles.find(\"input[type=file]\").val() as string).split('\\\\');\n                const filename = path[path.length - 1];\n                data['uploadDownloadableFile'] = uploadedFile;\n                data['uploadDownloadableTitle'] = this.$downloadableFiles.find(\"#downloadableFileTitle\").val();\n                data['uploadDownloadableFilename'] = filename;\n            }\n        }\n\n        $.post(this.$form.attr('action'), data, (ret) => {\n            if (ret['success']) {\n                window.setTimeout(() => {\n                    this.editor.destroy();\n                }, 100);\n                this.$textSaver.addClass('hidden');\n                this.$textHolder.attr('contenteditable', 'false');\n                this.$editCaller.removeClass('hidden');\n                this.$contentSettings.addClass('hidden');\n                this.$policyWidget.addClass('hidden');\n\n                if (ret['title'] !== null && !document.querySelector(\"body\").classList.contains(\"consultationIndex\")) {\n                    $(\".pageTitle\").text(ret['title']);\n                    document.title = ret['title'];\n                    $(\"#mainmenu .page\" + ret['id']).text(ret['title']);\n                    $(\".breadcrumb\").children().last().text(ret['title']);\n                }\n\n                if (ret['uploadedFile']) {\n                    this.addUploadedFileCb(ret['uploadedFile']);\n                }\n                this.hideDownloadableFiles();\n\n                if (ret['message']) {\n                    alert(ret['message']);\n                }\n\n                if (ret['redirectTo']) {\n                    window.location.href = ret['redirectTo'];\n                }\n            } else {\n                alert('Something went wrong...');\n            }\n        })\n    }\n\n    private onSubmitDeleteForm(ev, data) {\n        if (data && typeof (data.confirmed) && data.confirmed === true) {\n            return;\n        }\n        ev.preventDefault();\n        bootbox.confirm(__t(\"admin\", \"delPageConfirm\"), function (result) {\n            if (result) {\n                $(\".deletePageForm\").trigger(\"submit\", {'confirmed': true});\n            }\n        });\n    }\n}\n"]}