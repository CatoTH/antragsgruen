var __awaiter=this&&this.__awaiter||function(t,e,i,s){return new(i||(i=Promise))((function(r,d){function n(t){try{a(s.next(t))}catch(t){d(t)}}function o(t){try{a(s.throw(t))}catch(t){d(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(n,o)}a((s=s.apply(t,e||[])).next())}))};define(["require","exports","../shared/AntragsgruenEditor"],(function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EditorialEdit=void 0;e.EditorialEdit=class{constructor(t){this.$form=t,t.on("submit",(t=>t.preventDefault())),this.$saveRow=this.$form.find(".saveRow"),this.$textHolder=this.$form.find(".textHolder"),this.$editCaller=this.$form.find(".editCaller"),this.$editCaller.on("click",this.editCalled.bind(this)),this.$saveRow.addClass("hidden"),this.$saveRow.find("button").on("click",this.save.bind(this))}editCalled(t){t.preventDefault(),this.$editCaller.addClass("hidden"),this.$textHolder.attr("contenteditable","true"),this.editor=new i.AntragsgruenEditor(this.$textHolder.attr("id")),this.$textHolder.trigger("focus"),this.$saveRow.removeClass("hidden")}save(t){return __awaiter(this,void 0,void 0,(function*(){t.preventDefault();let e={data:this.editor.getEditor().getData(),_csrf:this.$form.find("> input[name=_csrf]").val()};$.post(this.$form.attr("action"),e,(t=>{t.success?(window.setTimeout((()=>{this.editor.getEditor().destroy()}),100),this.$saveRow.addClass("hidden"),this.$textHolder.attr("contenteditable","false"),this.$editCaller.removeClass("hidden"),this.$textHolder.html(t.html)):alert("Something went wrong...")}))}))}}}));
//# sourceMappingURL=EditorialEdit.js.map
