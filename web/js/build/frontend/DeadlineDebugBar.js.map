{"version":3,"sources":["frontend/DeadlineDebugBar.ts"],"names":["DeadlineDebugBar","$widget","csrf","this","find","val","submit","ev","preventDefault","click","$","post","attr","_csrf","action","ret","window","location","assign","href","split","alert","$picker","datetimepicker","locale","data","time","exports"],"mappings":"yGAAA,IAAAA,EACI,SAAoBC,GAChB,IAAMC,GADUC,KAAAF,QAAAA,GACKG,KAAK,uBAAuBC,MAEjDJ,EAAQK,OAAO,SAAAC,GAAM,OAAAA,EAAGC,mBAExBP,EAAQG,KAAK,oBAAoBK,MAAM,WACnCC,EAAEC,KAAKV,EAAQW,KAAK,UAAW,CAC3BC,MAASX,EACTY,OAAU,SACX,SAACC,GACIA,EAAa,QACbC,OAAOC,SAASC,OAAOF,OAAOC,SAASE,KAAKC,MAAM,KAAK,IAEvDC,MAAMN,EAAW,WAK7B,IAAMO,EAAUrB,EAAQG,KAAK,sBAC7BkB,EAAQC,eAAe,CACnBC,OAAQF,EAAQlB,KAAK,SAASqB,KAAK,YAGvCxB,EAAQG,KAAK,YAAYK,MAAM,WAC3B,IAAMiB,EAAOJ,EAAQlB,KAAK,SAASC,MACnCK,EAAEC,KAAKV,EAAQW,KAAK,UAAW,CAC3BC,MAASX,EACTY,OAAU,UACVY,KAAQA,GACT,SAACX,GACIA,EAAa,QACbC,OAAOC,SAASC,OAAOF,OAAOC,SAASE,KAAKC,MAAM,KAAK,IAEvDC,MAAMN,EAAW,YAlCxBY,EAAA3B,iBAAAA","file":"DeadlineDebugBar.js","sourcesContent":["export class DeadlineDebugBar {\n    constructor(private $widget: JQuery) {\n        const csrf = $widget.find('> input[name=_csrf]').val();\n\n        $widget.submit(ev => ev.preventDefault());\n\n        $widget.find('.closeCol button').click(() => {\n            $.post($widget.attr('action'), {\n                '_csrf': csrf,\n                'action': 'close'\n            }, (ret) => {\n                if (ret['success']) {\n                    window.location.assign(window.location.href.split('#')[0]);\n                } else {\n                    alert(ret['error']);\n                }\n            });\n        });\n\n        const $picker = $widget.find('#simulateAdminTime');\n        $picker.datetimepicker({\n            locale: $picker.find('input').data('locale')\n        });\n        \n        $widget.find('.setTime').click(() => {\n            const time = $picker.find('input').val();\n            $.post($widget.attr('action'), {\n                '_csrf': csrf,\n                'action': 'setTime',\n                'time': time\n            }, (ret) => {\n                if (ret['success']) {\n                    window.location.assign(window.location.href.split('#')[0])\n                } else {\n                    alert(ret['error']);\n                }\n            });\n        });\n    }\n}"]}